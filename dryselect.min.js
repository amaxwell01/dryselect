(function(a,b,c){var f,e={checkbox:"<input type=checkbox />",enabled:!0};Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var g={create:function(a){var d,g,b=this;a&&(f=c.extend(e,a)),f.name&&(f.element=c('[data-name="'+f.name+'"]'),f.element.attr("id",f.name+"_container"),b.collection[f.name]=f),g=b.newSelectDOM(),d='<ol class="dryselect_list_container">'+g+"</ol>",f.element.append(d),b.enableSelection(f.name)},collection:{},count:function(a){var b=c("#"+a.name+"_container"),d=b.find("li.selected"),e=0,f=0;for(f=0;d.length>f;f++)e++;return e},enableSelection:function(a){var b=g.collection[a],d=b.element.find("li"),e=b.element.find("li").find('input[type="checkbox"]');d.off("click"),e.off("click"),b.enabled?(d.removeClass("disabled"),e.prop("disabled",!1),d.on("click",function(){var a=c(this).find('input[type="checkbox"]').prop("checked");a?(c(this).removeClass("selected"),c(this).find('input[type="checkbox"]').prop("checked",!1)):(c(this).addClass("selected"),c(this).find('input[type="checkbox"]').prop("checked",!0))}),e.on("click",function(){var a=c(this).prop("checked");a?(c(this).parents("li").removeClass("selected"),c(this).prop("checked",!1)):(c(this).parents("li").addClass("selected"),c(this).prop("checked",!0))})):(d.addClass("disabled"),e.prop("disabled",!0))},get:function(a){c.extend(!0,g.collection[a.name],a);var h,b=g.collection[a.name],d=b.element,e=d.find("li"),f={selected:[],non_selected:[],all:[]};return c.each(e,function(a,b){h=c(b),h.hasClass("selected")?(f.all.push({selected:!0,title:h.text(),value:h.attr("data-value")}),f.selected.push({value:h.attr("data-value"),title:h.text()})):(f.all.push({selected:!1,title:h.text(),value:h.attr("data-value")}),f.non_selected.push({value:h.attr("data-value"),title:h.text()}))}),f},getSelectionCoords:function(){var d,e,c=b.selection,f=0,g=0;if(c)"Control"!=c.type&&(d=c.createRange(),d.collapse(!0),f=d.boundingLeft,g=d.boundingTop);else if(a.getSelection&&(c=a.getSelection(),c.rangeCount&&(d=sel.getRangeAt(0).cloneRange(),d.getClientRects))){d.collapse(!0);var h=d.getClientRects()[0];f=h.left,g=h.top}return e={x:f,y:g},console.log(e),e},newSelectDOM:function(){var a="",b="";return f.values&&c.each(f.values,function(c,d){f.checkboxes&&(b='<input type="checkbox" name="'+d.title+'" value="'+d.value+'"">'),a+='<li class="'+d.itemClass+'" id="'+d.itemID+'" data-value="'+d.value+'">'+b+'<span class="title">'+d.title+"</span></li>"}),a},select:function(a){var b=c("#"+a.name+"_container"),d=b.find("li");a.values?"all"===a.values?c.each(d,function(a,b){c(b).addClass("selected"),c(b).find('input[type="checkbox"]').prop("checked",!0)}):"none"===a.values?c.each(d,function(a,b){c(b).removeClass("selected"),c(b).find('input[type="checkbox"]').prop("checked",!1)}):Array.isArray(a.values)&&c.each(d,function(b,d){c(d).attr("data-value")===a.values[b]&&(c(d).addClass("selected"),c(d).find('input[type="checkbox"]').prop("checked",!0))}):console.log("no values specified")},set:function(a){var b=this;c.extend(!0,g.collection[a.name],a);var h,d=g.collection[a.name],e=d.element,f=e.find("li"),i=function(a,b,d){a&&b&&c.each(f,function(e,f){h=c(f),h.attr("data-value")===a&&(h.find('input[type="checkbox"]').attr("name",b),h.find(".title").text(b),d&&(h.find('input[type="checkbox"]').val(d),h.attr("data-value",d)))})};b.enableSelection(d.name),d.values&&Array.isArray(d.values)&&c.each(d.values,function(a,b){i(""+b.value,b.title,b.newValue)})}};a.dryselect=g})(window,document,jQuery);