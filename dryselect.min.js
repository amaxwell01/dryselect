(function(a,b,c){var e;Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var f={create:function(a){var d,f,b=this,g={checkbox:"<input type=checkbox />",enabled:!0};a&&(e=c.extend(g,a)),e.name&&(e.element=c('[data-dryname="'+e.name+'"]'),e.element.attr("id",e.name+"_container"),b.collection[e.name]=e),f=b.newSelectDOM(e.name),d='<ol class="dryselect_list_container">'+f+"</ol>",e.element.append(d),b.enableSelection(e.name)},collection:{},count:function(a){var b=c("#"+a.name+"_container"),d=b.find("li.selected"),e=0,f=0;for(f=0;d.length>f;f++)e++;return e},enableSelection:function(a){var b=f.collection[a],d=b.element.find("li"),e=b.element.find("li").find('input[type="checkbox"]'),g=function(){var a=c(this).find('input[type="checkbox"]').prop("checked");a?(c(this).removeClass("selected"),c(this).find('input[type="checkbox"]').prop("checked",!1)):(c(this).addClass("selected"),c(this).find('input[type="checkbox"]').prop("checked",!0))},h=function(){var a=c(this).prop("checked");a?(c(this).parents("li").removeClass("selected"),c(this).prop("checked",!1)):(c(this).parents("li").addClass("selected"),c(this).prop("checked",!0))};d.off("click",g),e.off("click",h),b.enabled?(d.removeClass("disabled"),e.prop("disabled",!1),d.on("click",g),e.on("click",h)):(d.addClass("disabled"),e.prop("disabled",!0))},get:function(a){c.extend(!0,f.collection[a.name],a);var h,b=f.collection[a.name],d=b.element,e=d.find("li"),g={selected:[],non_selected:[],all:[]};return c.each(e,function(a,b){h=c(b),h.hasClass("selected")?(g.all.push({selected:!0,title:h.text(),value:h.attr("data-value")}),g.selected.push({value:h.attr("data-value"),title:h.text()})):(g.all.push({selected:!1,title:h.text(),value:h.attr("data-value")}),g.non_selected.push({value:h.attr("data-value"),title:h.text()}))}),g},getSelectionCoords:function(){var d,e,c=b.selection,f=0,g=0;if(c)"Control"!=c.type&&(d=c.createRange(),d.collapse(!0),f=d.boundingLeft,g=d.boundingTop);else if(a.getSelection&&(c=a.getSelection(),c.rangeCount&&(d=sel.getRangeAt(0).cloneRange(),d.getClientRects))){d.collapse(!0);var h=d.getClientRects()[0];f=h.left,g=h.top}return e={x:f,y:g},console.log(e),e},newSelectDOM:function(a){var g,h,b=f.collection[a],d="",e="";return b.values&&c.each(b.values,function(a,c){b.valueMapping?(g=c[b.valueMapping.value],h=c[b.valueMapping.title]):(g=c.value,h=c.title),b.checkboxes&&(e='<input type="checkbox" name="'+h+'" value="'+g+'">'),d+='<li class="'+c.itemClass+'" id="'+c.itemID+'" data-value="'+g+'">'+e+'<span class="title">'+h+"</span></li>"}),d},select:function(a){var b=c("#"+a.name+"_container"),d=b.find("li"),e=function(b,d){c.each(a.values,function(a,b){c(d).attr("data-value")===b&&(c(d).addClass("selected"),c(d).find('input[type="checkbox"]').prop("checked",!0))})};a.values?"all"===a.values?c.each(d,function(a,b){c(b).addClass("selected"),c(b).find('input[type="checkbox"]').prop("checked",!0)}):"none"===a.values?c.each(d,function(a,b){c(b).removeClass("selected"),c(b).find('input[type="checkbox"]').prop("checked",!1)}):Array.isArray(a.values)&&c.each(d,function(a,b){e(a,b)}):console.log("no values specified")},set:function(a){var b=this;c.extend(!0,f.collection[a.name],a);var h,i,j,d=f.collection[a.name],e=d.element,g=e.find("li"),k=function(a,b,d){a&&b&&c.each(g,function(e,f){h=c(f),h.attr("data-value")===a&&(h.find('input[type="checkbox"]').attr("name",b),h.find(".title").text(b),d&&(h.find('input[type="checkbox"]').val(d),h.attr("data-value",d)))})};b.enableSelection(d.name),d.values&&Array.isArray(d.values)&&c.each(d.values,function(a,b){d.valueMapping?(i=b[d.valueMapping.value],j=b[d.valueMapping.title]):(i=b.value,j=b.title),k(""+i,j,b.newValue)})}};a.dryselect=f})(window,document,jQuery);